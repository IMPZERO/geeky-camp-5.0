# OOP

- съдържат състояние (член-променливи)
- съдържат поведение (методи)
- комуникират чрез съобщения

## Клас - дефиниция на обект
- описва състояние - член-променливи
- описва поведение - методи

## Използване на this
- Достъпване на член променливи, подаване като параметър...
- извикване на overload

## Java пакети

Именувани групи от семантично свързани класове. Служат за йерархично организиране на кода Съответстват на директорно дърво на файловата система

Конвенция за именуване
- само малки букви, точка за разделител
- компаниите използват **обърнат домейн адрес**
 **mail.google.com** -> **com.google.mail**

## Достъп до клас от друг пакет

Всеки клас има достъп по подразбиране (имплицитно) до
- Класове от собствения си пакет
- Класовете в пакета java.lang

Ако искаме клас да има достъп до клас в някой друг пакет, трябва експлицитно да го заявим с **import** декларация, която поставяме над декларацията на класа.

Когато import-ваме е прието да подреждаме в сортиран ред по пакет.клас
**import java.util.* ** -> нечетливо

## Модификатори за достъп

- За клас
 - public	Достъпен за всеки клас във всеки пакет
 - без модификатор ("package-private", "default")	Достъпен само за класовете в собствения си пакет

- За член-променливи и методи на клас

**Енкапсулация** - Предутверява класа от inconsistent internal state.

## Наследяване (Inheritance)

Позволява преизполване и разширяване на поведение и състояние на вече съществуващи класове

В Java се реализира с ключовата дума **extends**

Класът - наследник получава достъп до всички **public** и **protected** член-променливи методи на родителския клас

Класът - наследник може да предифинира методи на родител-класа. Модификаторът за достъп на метод в класа-наследник трябва да съвпада с родител-класа

## Ключовата дума super

Референция към прекия родител на обекта

Неявно се подава като параметър на всеки конструктор и метод на класа

### Употребява се за: 
- Достъпване на член-променливи на родителя
- Извикване на конструктора на родителя
- Извикване на методи от родителя - клас

## Йерархията от класове в Java

Всички класове в Java са (преки или косвени) наследници на класа java.lang.Object

Липсата на множествено наследяване означава, че всеки клас има точно един родител (с изкючение на един Object, който няма родител)

**->** Йерархията от класове е дърво, java.lang.Oject е корен.

## Операторът instanceof

Ипозлва се за type checking: дали даден обек е инстанция на даден клас

пример: ```java System.out.println(ivan instanceof Student); // true```

**Нарушава полиморфизма**

## Ключовата дума final

- В декларация на променлива -> прави я константа
- В декларация на метод -> методът не може да се override-ва
- В декларация на клас -> класът не може да се наследява

## Полиморфизъм

От гръцки poly (много) + morphe (форма)
Използва се за - Overloading (Compile-time) и Оverriding (Runtime)

## Интерфейси

- по-тежка версия на abstract

Съвкупност от декларации на методи без имплементация

Описва формално поведение без да го импленетира

Може да съдържа static final член-променливи == константи

* Методите и константите по default са public
* От Javа, може да съдържат също default и static методи с имплементация. В java 9 - и private методи

## Абстракция

Принцип, при който когато моделираме нещо, увеличаваш съответните характеристики, които те интересуват, пропускаме нерелеванти за нас характеристики (абстрахираме се)

## Класът java.lang.Object

Методи:

- .еquals()
- .hashCode()
- .toString()
- .clone()

Обекти се сравняват за равенство с .eqauls(), a не с ==

"==" се използва за проверка на референция,
* "==" не се използва при сравнение на обекти

### equals()

**Винаги го предефинираме в класа ни!**

### hashCode()

**Предифинира се, когато сме предифинирали equals()**

**Важно**
При предефинирането на hashCode(), ако е equals() връща true, hashCode-ът на съотвентните обекти трябва да е равен. Ако hashCode-ът на два обекта е равен, не е задължително equals() да връща true.

## Static

- Те са част от класа, а не от конктретната негова инстанция (обект).

- Могат да се достъпват без да е създаден обект: само с името на класа, точка, името на статичната член-променлива или метод. Например:
	- Math.PI			// константата пи
	- Math.pow(double, double)
- Статичните член-променливи имат едно-единствено копие, което се споделя от всички инстанции на класа.
	- ако са константи, пестим памен (няма смисул да се мултиплицират във всяка инстанция)
	- ако са променливи, всяка инстанция "вижда" и променя една и съща стойност, което е механизъм между всики инстанции на дадения клас

- Статичните методи имат достъп само до статичните член-променливи и други статични методи на класа. Нестатичните методи имат достъп както до статичните, така и до нестатичните.

# Exceptions

## Генериране на изключения

- ```java 
public Object pop() {
   if (size == 0) {
   	throw new exception ...
   }
}
```

## Хващане на изключение

Try Catch фрагмент

## Видове изключения

- Checked
	Наричат се още compile-time exceptions, защото компилаторъ ни задължава да ги обработим в кода
- Unchecked 
	Runtime exceptions, възникват при изпълнение
- Errors
	Проблеми, които възникват извън приложението, и приложението обикновено не може да ги очаква или да се възстанови от тях. Обикновено се генерират от самата виртуална машина.
	
	Примери:
	- OutOfMemory
	- StackOverflowError

## Деклариране на хвърляни изключения

Ако метод не прехваща даден **checked** exception, който може да се хвърли в тялото му, той трябва да го декларира в прототипа си, за да "предупреди" тези, които го викат:

```java
public void writeList() throws IOException, IndexOutOfBoundsException {
...
}
```

## Защо да ползваме изключения?

- Отделяме кода за обработка на грешки -> става по-четим
- "препредаване" на грешки по стека на извикванията
- Групиране и диференциране на различните типове грешки

## Приниципи на чистия код - спазвай ООП принципите

Енкапсулация
- Свеждай публичните части до минумум

Наследяване
- Не допускай code duplication

Полиморфизум
- ползвай полиморфизъм винаги, когато е възможно
- Използвай интерфейц за декларация, имплементация за инициализация

## Принципи на чистия код

- Използвай само по изключение пакета по подразбиране
- Един клас трябва да прави едно нещо
	- Ако имаш "and" в името, вероятно не е така
	- Ако в името имаш "Helper", "Manager, "Utility", може би има по-добър дизайн
- Един метод трябва да прави едно нещо
	- Да е кратък: <= 20 реда код
	- Ако имаш "and" в името, може би прави повече неща -> разделяй го на няколко
	- Ако имаш много параметри на метод, може ми не му е мястото в този клас
- Не злоупотребвай със static

- Форматирай си кода
	Нямаш никакво оправдание да не го правиш
- Вместо "магически числа" в кода, ползвай подходящо именувани константи

- пакети
	само малки букви, със смислена йерархия - bg.uni.sofia.fmi.mjt

- класове, абстрактни класове, интерфейси, enums
	съществителни, започващи с глави букви - Student, GameBoard

- методи
	започват с малка буква - reverseString()

- константи
	all-caps, с подчертавки между думите - MAX_NAME_LENGTH

- Слагай коментари, без да прекаляваш

- Разделяй I/O логиката от бизнес логиката

- Разделяй нормалната логика от exception логиката
	Ползвай изключения вместо error codes и печатане на съобщения в конзолата

- Полезни инструменти
	**checkstyle**, **PMD**, **FindBugs**


